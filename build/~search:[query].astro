---
import Layout from "@layouts/Layout.astro";

async function getSearchResults(query: string) {
    const response = await fetch(`${Astro.site.host}/gmod/search.json?query=${query}`);
    const data = await response.json();
    return data;
}

console.log("astro query", Astro.params.query);
const response = await getSearchResults(Astro.params.query);
const results = JSON.stringify(response);
---

<Layout title="Search Results" description="Garry's Mod Wiki" views="" updated="">
    {JSON.stringify(results)}
</Layout>
